parameters:
  featurestorebundle:
    db_name_template: '%kernel.environment%_feature_store'
    table_name_template: 'features_{entity}'
    path_template: 'dbfs:/feature_store/{entity}.delta'
    metadata_api:
      enabled: False
      url:

services:
  featurestorebundle.logger:
    class: logging.Logger
    factory: ['@loggerbundle.LoggerFactory', 'create']
    arguments:
      - 'feature_store'

  featurestorebundle.db.TableNames:
    arguments:
      - '%featurestorebundle.db_name_template%'
      - '%featurestorebundle.table_name_template%'
      - '%featurestorebundle.path_template%'

  featurestorebundle.feature.EmptyTableCreator:

  featurestorebundle.feature.FeatureDataMerger:
    arguments:
      - '%featurestorebundle.metadata_api.enabled%'
      - '@featurestorebundle.logger'

  featurestorebundle.feature.FeatureManager:
    arguments:
      - '@featurestorebundle.logger'

  featurestorebundle.feature.FeatureStore:

  featurestorebundle.feature.TablePreparer:

  featurestorebundle.gql.GraphQLTransport:
    class: gql.transport.requests.RequestsHTTPTransport
    arguments:
      url: '%featurestorebundle.metadata_api.url%'

  featurestorebundle.gql.GraphQLClient:
    class: gql.client.Client
    arguments:
      transport: '@featurestorebundle.gql.GraphQLTransport'
